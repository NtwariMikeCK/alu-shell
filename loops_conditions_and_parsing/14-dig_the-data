#!/usr/bin/env bash
# Define the function to process the log file

# Path to the Apache log file
log_file="/path/to/your/apache_log_file.log"

# Use awk to process the log file
awk '{
    # Extract IP and HTTP status code
    ip = $1
    status_code = $9
    # Create a unique key combining IP and status code
    key = ip " " status_code
    # Increment the count for this key
    count[key]++
}
END {
    # Output the counts
    for (k in count) {
        print count[k], k
    }
}' "$log_file" |
# Sort the output by the number of occurrences in descending order
sort -nr |
# Print the sorted list
awk '{print $1, $2, $3}'
